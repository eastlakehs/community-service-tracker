<h1 align="center">Community Service Tracker</h1>

<p align="center">
                
  <a href="https://www.netlify.com">
    <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify" />
  </a>
  
  <a href="https://github.com/eastlake-key/community-service-tracker/workflows/CI/badge.svg">
    <img src="https://github.com/eastlake-key/community-service-tracker/workflows/CI/badge.svg" alt="CI github actions build" />
  </a>
  
</p>

<p align="center">
   Repo for the eastlake community service tracker website<br>
   <a href="https://ehs-service.org">ehs-service.org</a>
</p>

<p align="center">
   <img src="./docs/images/wolflogo.png" width="200" height="200" />
</p>

# Status: Live at <a href="https://ehs-service.org"> http://ehs-service.org </a>

# Please see [CONTRIBUTING.md](./CONTRIBUTING.md) for how to run the website locally

## Best Practicies

### In order to make this repo maintainible, the following rules should be followed:

Pushing directly to a branch should be blocked <br>
All commits should be done through pull requests <br>
All pull requests should be reviewed by at least one other person <br>

## Security

### Using Firebase email-link-auth is the safest choice

<a href = "https://firebase.google.com/docs/auth/web/email-link-auth">Firebase Docs</a> <br>
Users get a emailed a link that allows them to sign in <br>
No passwords are ever stored which prevents unintential misconfigurations <br>
The user emails are automatically verified which prevents impersonation and binds the user to their lwsd email <br>
Only users from lwsd will be able to acess the database, preventing outside usage/spam <br>

# Dependencies

## Browserstack + selenium

### Selenium script currently not maintained: might be used in the future for e2e tests

### Does not work for pull requests that are from a different repository

Generates screenshots for website based on `actions/screenshots/screenshot.py`. Screenshots are automatically uploaded as artifacts for each pull request to verify any significant UI breaking changes and ensure compatibility across platforms.

Current platforms added to the config include:

```
iPhone 8 (Safari)
iPhone 8 Plus (Safari)
iPhone 11 Pro Max (Safari)
Samsung Galaxy S20 (Chrome)
```

You can access screenshots by going to the artifact section of a github actions run and downloading the zip file.
<img width="1680" alt="Screen Shot 2020-08-12 at 5 55 13 PM" src="https://user-images.githubusercontent.com/52898838/90082918-e365f780-dcc5-11ea-9632-7e188a03585e.png">

## Netlify

### Authentication currently does not work with Netlify builds. If you need to test a feature that requires logging in, please run the site locally using the guide in CONTRIBUTING.md

Generates automatic preview builds for each pull request in order to demo for breaking changes. Once merged to master, netlify will automatically upate the live website to the preview build.

<img width="932" alt="Screen Shot 2020-08-12 at 6 04 01 PM" src="https://user-images.githubusercontent.com/52898838/90083025-38a20900-dcc6-11ea-9d6e-9d0243722d67.png">

<img width="741" alt="Screen Shot 2020-08-12 at 6 05 34 PM" src="https://user-images.githubusercontent.com/52898838/90083087-71da7900-dcc6-11ea-9ce1-171e46159b53.png">

## React

UI framework <br>
https://reactjs.org/

## React-helmet

Managment for the head element of the website (language tags, description, page title, etc). <br>
https://github.com/nfl/react-helmet

## Date picker

https://github.com/Kiarash-Z/react-modern-calendar-datepicker

## React toastify

https://github.com/fkhadra/react-toastify

## Redux-toolkit

State managment library <br>
https://redux-toolkit.js.org/

## Tailwind CSS

Utility CSS Library <br>
https://tailwindcss.com/

## Firebase

Email link authentication and firestore database <br>
https://firebase.google.com/

# Common Problems encountered

## Release build shows blank page and console.log shows "nothing was returned from render"

This is mostly likely due to a comment being placed above a return line, causing babel to transform it (incorrectly) and break syntax.

# Tailwind

Tailwind config is located in `tailwind.config.js`. Tailwind css is generated by running `npm run tailwind` which converts `src/styles/tailwind.in.css` into `src/styles/tailwind.out.css`. This `tailwind.out.css` file is imported globally in index.js. For production builds, purgeCSS (built in to tailwind cli) will automatically tree shake unused css when building `tailwind.out.css`.

In order to ensure that needed css remains in the build folder, certain patterns must be followed when dynamically using css classes in react. These rules can be read at https://tailwindcss.com/docs/controlling-file-size/.

In short, do not do this:

```jsx
<div :class="text-{{ error ? 'red' : 'green' }}-600"></div>
```

Instead, do this:

```jsx
<div :class="{{ error ? 'text-red-600' : 'text-green-600' }}"></div>
```
